# https://docs.github.com/en/actions/reference/encrypted-secrets#using-encrypted-secrets-in-a-workflow
# https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions
name: travis-docker
on: 
  push:
    branches:
      - docker-multistage
#steps:
#  - name: travis-docker-credentials
#    env:
#      DOCKER_PASSWORD: ${{  secrets.DOCKER_PASSWORD }}
#      DOCKER_USERNAME: ${{  secrets.DOCKER_USERNAME }}
jobs:
  docker_deploy:
    
    env:      
      DOCKER_PASSWORD: ${{  secrets.DOCKER_PASSWORD }}
      DOCKER_USERNAME: ${{  secrets.DOCKER_USERNAME }}
    runs-on: ubuntu-18.04
    steps:
      - id:  test-not-so-secret-variable
        run: echo "logging in with ${DOCKER_USERNAME:0:6}"
      - id:  docker-login
        run: echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin; echo $?
        
